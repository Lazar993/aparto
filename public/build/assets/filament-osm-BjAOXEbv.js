var o={debounceDelay:400,minChars:3,init:function(){for(var t=document.querySelectorAll('input[data-osm-autocomplete="true"]'),n=0;n<t.length;n+=1){var e=t[n];o.ensureInputId(e),e.dataset.apartoOsmBound!=="true"&&(e.dataset.apartoOsmBound="true",o.bindAutocomplete(e))}},ensureInputId:function(t){t.id||(t.id="aparto-osm-"+Math.random().toString(36).slice(2))},bindAutocomplete:function(t){var n=null,e=null,r=o.createDropdown(t);t.addEventListener("input",function(){var i=t.value.trim();o.clearDropdown(r),!(i.length<o.minChars)&&(n&&clearTimeout(n),n=setTimeout(function(){e&&e.abort(),e=new AbortController,o.fetchResults(i,e.signal,function(a){o.renderResults(r,t,a)})},o.debounceDelay))}),document.addEventListener("click",function(i){r.contains(i.target)||t.contains(i.target)||o.clearDropdown(r)})},fetchResults:function(t,n,e){var r="/osm/search?q="+encodeURIComponent(t);fetch(r,{headers:{Accept:"application/json"},signal:n}).then(function(i){return i.ok?i.json():[]}).then(function(i){e(Array.isArray(i)?i:[])}).catch(function(){e([])})},renderResults:function(t,n,e){if(e.length){t.style.display="grid",o.positionDropdown(n,t);for(var r=0;r<e.length;r+=1)(function(i){var a=document.createElement("button");a.type="button",a.textContent=i.display_name,a.className="aparto-osm-item",a.style.padding="8px 12px",a.style.textAlign="left",a.style.border="none",a.style.borderRadius="6px",a.style.cursor="pointer",a.style.fontSize="14px",a.style.color="#374151",a.style.backgroundColor="transparent",a.style.transition="background-color 0.15s",a.style.width="100%",a.style.display="block",a.addEventListener("mouseenter",function(){a.style.backgroundColor="#f3f4f6"}),a.addEventListener("mouseleave",function(){a.style.backgroundColor="transparent"}),a.addEventListener("click",function(){o.applyResult(n,i),o.clearDropdown(t)}),t.appendChild(a)})(e[r])}},applyResult:function(t,n){t.value=n.display_name||t.value,t.dispatchEvent(new Event("input",{bubbles:!0})),o.setInputValue(t.dataset.latInput,n.lat),o.setInputValue(t.dataset.lngInput,n.lon)},findCity:function(t){return t.city||t.town||t.village||t.county||t.state||""},setInputValue:function(t,n){if(!(!t||n===void 0||n===null)){var e=document.querySelector('[id="'+t+'"]');e&&(e.value=n,e.dispatchEvent(new Event("input",{bubbles:!0})))}},createDropdown:function(t){var n=document.querySelector('.aparto-osm-dropdown[data-osm-for="'+t.id+'"]');n&&n.parentNode.removeChild(n);var e=document.createElement("div");return e.className="aparto-osm-dropdown",e.setAttribute("data-osm-for",t.id),e.style.position="fixed",e.style.zIndex="9999",e.style.background="#ffffff",e.style.border="1px solid #d1d5db",e.style.borderRadius="8px",e.style.boxShadow="0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",e.style.padding="4px",e.style.display="none",e.style.gap="2px",e.style.maxHeight="280px",e.style.overflow="auto",e.style.boxSizing="border-box",document.body.appendChild(e),o.positionDropdown(t,e),window.addEventListener("resize",function(){o.positionDropdown(t,e)}),window.addEventListener("scroll",function(){e.style.display!=="none"&&o.positionDropdown(t,e)},!0),e},positionDropdown:function(t,n){var e=t.getBoundingClientRect();n.style.width=e.width+"px",n.style.left=e.left+"px",n.style.top=e.bottom+4+"px"},clearDropdown:function(t){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none"},ensureMap:function(t){var n=t.dataset.mapTarget;if(n&&!o.maps[n]){var e=document.getElementById(n);if(e&&!(e.dataset.apartoMapReady==="true"||e._leaflet_id)&&!(!window.L||!window.L.map)){var r=L.map(e).setView([44.8176,20.4633],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(r),e.dataset.apartoMapReady="true",o.maps[n]={map:r,marker:null}}}},updateMap:function(t,n){var e=t.dataset.mapTarget;if(e){var r=o.maps[e];if(r){var i=parseFloat(n.lat),a=parseFloat(n.lon);isNaN(i)||isNaN(a)||(r.marker?r.marker.setLatLng([i,a]):r.marker=L.marker([i,a]).addTo(r.map),r.map.setView([i,a],15))}}},maps:{}};function l(){o.init(),window.Livewire&&Livewire.hook("morph.updated",({el:t,component:n})=>{o.init()})}document.addEventListener("DOMContentLoaded",function(){l()});document.addEventListener("livewire:navigated",function(){o.init()});
